<html>
  <head>
    <meta charset="utf-8"/>
    <title>timbre - load a wav file and decode it</title>
    <link type="text/css" media="screen" rel="stylesheet" href="css/examples.css" />
    <link type="text/css" media="screen" rel="stylesheet" href="css/libs/prettify.css" />
    <link type="text/css" rel="stylesheet" href="http://fonts.googleapis.com/css?family=Comfortaa:700">
    <style>
      #p {
        margin:5px;padding:5px;background:#ededed;
        border:solid 1px gray;opacity:0.9;
      }
      #open { display:none; width:80px; }
      #list { display:none; }
    </style>
  </head>
  <body>
    <canvas id="waveviewer"></canvas>
    <selction id="body">
      <header style="margin:5px 0px 15px 0px">
        <h1 id="title"><a href="/timbre">timbre</a></h1>
        <span>JavaScript Library for Objective Sound Programming</span><br/>
      </header>
      
      <div id="caution">system requirements: Chrome 14- or Firefox 4-</div>
      
      <button id="play0">play</button><button id="pause0">pause</button>
      <div id="p">
        You can operate music in your WebConsole. (Chrome Only)<br/>
        <button id="open">open</button>
        <div id="list">
          <ul>
            <li>dist.on()</li>
            <li>dist.off()</li>
            <li>dist.pre = [number]</li>
            <li>dist.post = [number]</li>
            <li>dist.freq = [number]</li>
            <li>dist.mul = [number]</li>
          </ul>
          <ul>
            <li>delay.on()</li>
            <li>delay.off()</li>
            <li>delay.time = [number]</li>
            <li>delay.fb = [number]</li>
            <li>delay.wet = [number]</li>
            <li>delay.mul = [number]</li>
          </ul>
        </div>
      </div>
      <pre id="code" class="prettyprint">
// load wav files and decode
      </pre>
      
    </section>
  </body>
  <script type="text/javascript" src="js/libs/prettify.js"></script>
  <script type="text/javascript">prettyPrint();</script>
  <script type="text/javascript" src="../timbre.js"></script>
  <script type="text/javascript" src="js/003.js"></script>    
  <script type="text/javascript" src="js/waveviewer.js"></script>  
  <script type="text/javascript" src="js/libs/jquery.min.js"></script>
  <script type="text/javascript">
    $(function() {
        if (!timbre._sys._impl) $("#caution").show();    
    
        var viewer = new WaveViewer(timbre._sys, 60, "waveviewer", 512, 256);
        
        timbre.addEventListener("on", function() {
            $("#title").css("color", "rgb(0, 136, 0)");
            viewer.start();
        });
        timbre.addEventListener("off", function() {
            $("#title").css("color", "rgb(136, 136, 136)");
            viewer.pause();
        });
        
        var list = [ ex1 ];
        list.forEach(function(ex, i) {
            var dac = ex.dac;
            dac.addEventListener("on" , function() {timbre.on();});
            dac.addEventListener("off", function() {
                if (list.every(function(dac) {return ex.dac.isOff;})) timbre.off();
            });
            $("#play"  + i).on("click", function() { ex.play() ; });
            $("#pause" + i).on("click", function() { ex.pause(); });
        });
    
        if (timbre.env === "webkit") $("#open").show();
        var isOpen = false;
        $("#open").on("click", function() {
            if (isOpen) {
                $(this).text("open");
                $("#list").hide();
            } else {
                $(this).text("close");
                $("#list").show();
            }
            isOpen = !isOpen;
        });
    });
  </script>
</html>
